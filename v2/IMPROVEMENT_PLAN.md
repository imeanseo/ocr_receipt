# v0 â†’ v1 ê°œì„  ê³„íš

í˜„ì¬ ì„±ëŠ¥: **H-Mean 0.9450** (Precision 0.9766, Recall 0.9203)

ëª©í‘œ: **H-Mean 0.95+**

---

## ğŸ“Š í˜„ì¬ ì„±ëŠ¥ ë¶„ì„

### ê°•ì 
- âœ… **Precisionì´ ë§¤ìš° ë†’ìŒ** (0.9766) - ê±°ì˜ ëª¨ë“  ê²€ì¶œì´ ì •í™•í•¨
- âœ… **H-Meanì´ ëª©í‘œë¥¼ ì´ˆê³¼ ë‹¬ì„±** (0.9450 > 0.90)

### ê°œì„  ì—¬ì§€
- âš ï¸ **Recallì´ Precisionë³´ë‹¤ ë‚®ìŒ** (0.9203 vs 0.9766)
  - Precisionì´ ë†’ë‹¤ëŠ” ê²ƒì€ Recallì„ ë” ì˜¬ë¦´ ì—¬ì§€ê°€ ìˆë‹¤ëŠ” ì˜ë¯¸
  - ì‘ì€ í…ìŠ¤íŠ¸ë‚˜ ê²½ê³„ ì˜ì—­ì˜ í…ìŠ¤íŠ¸ë¥¼ ë†“ì¹˜ê³  ìˆì„ ê°€ëŠ¥ì„±

---

## ğŸ¯ ê°œì„  ì „ëµ (ìš°ì„ ìˆœìœ„ë³„)

### 1ìˆœìœ„: ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ ê°œì„  (ë¹ ë¥¸ ì‹¤í—˜)

#### 1.1 **ì´ë¯¸ì§€ í¬ê¸° ì¦ê°€** â­â­â­
**í˜„ì¬**: 640x640  
**ì œì•ˆ**: 800x800 ë˜ëŠ” 1024x1024

**ì´ìœ **:
- ì‘ì€ í…ìŠ¤íŠ¸ ê²€ì¶œ ê°œì„ ì— ì§ì ‘ì  ì˜í–¥
- CLEvalì€ character-level í‰ê°€ì´ë¯€ë¡œ ì‘ì€ í…ìŠ¤íŠ¸ê°€ ì¤‘ìš”

**ì˜ˆìƒ íš¨ê³¼**: Recall +0.01~0.02

**íŒŒì¼**: `configs/preset/datasets/db.yaml`
```yaml
transforms:
  train_transform:
    transforms:
      - _target_: albumentations.LongestMaxSize
        max_size: 1024  # 640 â†’ 1024
      - _target_: albumentations.PadIfNeeded
        min_width: 1024
        min_height: 1024
```

**ì£¼ì˜ì‚¬í•­**:
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€ (batch_size ì¡°ì • í•„ìš”í•  ìˆ˜ ìˆìŒ)
- í•™ìŠµ ì‹œê°„ ì¦ê°€

---

#### 1.2 **í›„ì²˜ë¦¬ Threshold ìµœì í™”** â­â­â­
**í˜„ì¬**: thresh=0.3, box_thresh=0.3

**ì œì•ˆ**: Grid Searchë¡œ ìµœì ê°’ ì°¾ê¸°
- thresh: [0.25, 0.3, 0.35]
- box_thresh: [0.25, 0.3, 0.35, 0.4]

**ì˜ˆìƒ íš¨ê³¼**: Recall +0.005~0.01

**íŒŒì¼**: `configs/preset/models/head/db_head.yaml`

---

#### 1.3 **Loss Weight ì¡°ì •** â­â­
**í˜„ì¬**:
- prob_map_loss_weight: 5.0
- thresh_map_loss_weight: 10.0
- binary_map_loss_weight: 1.0

**ì œì•ˆ**: prob_map weight ì¦ê°€ (í…ìŠ¤íŠ¸ ì˜ì—­ ê²€ì¶œ ê°•í™”)
```yaml
prob_map_loss_weight: 7.0  # 5.0 â†’ 7.0
thresh_map_loss_weight: 10.0
binary_map_loss_weight: 1.0
```

**ì˜ˆìƒ íš¨ê³¼**: Recall +0.005~0.01

**íŒŒì¼**: `configs/preset/models/loss/db_loss.yaml`

---

### 2ìˆœìœ„: ëª¨ë¸ ì•„í‚¤í…ì²˜ ê°œì„  (ì‹œê°„ ì†Œìš”)

#### 2.1 **ë” ê°•ë ¥í•œ Backbone** â­â­â­
**í˜„ì¬**: ResNet-34  
**ì œì•ˆ**: ResNet-50 ë˜ëŠ” EfficientNet-B3

**ì£¼ì˜**: ResNet-50ì€ decoder ì±„ë„ ìˆ˜ ì¡°ì • í•„ìš”
- ResNet-50: [256, 512, 1024, 2048]
- í˜„ì¬ decoder: [64, 128, 256, 512]

**ëŒ€ì•ˆ**: EfficientNet-B3 (ì±„ë„ ìˆ˜ í˜¸í™˜ ê°€ëŠ¥)

**ì˜ˆìƒ íš¨ê³¼**: Recall +0.01~0.02

**íŒŒì¼**: `configs/preset/models/encoder/timm_backbone.yaml`

---

#### 2.2 **FPN Neck ì¶”ê°€** â­â­
**í˜„ì¬**: UNet decoder  
**ì œì•ˆ**: FPN (Feature Pyramid Network) ì¶”ê°€

**ì´ìœ **: Multi-scale feature fusionìœ¼ë¡œ ì‘ì€ í…ìŠ¤íŠ¸ ê²€ì¶œ ê°œì„ 

**ì˜ˆìƒ íš¨ê³¼**: Recall +0.005~0.01

**êµ¬í˜„ í•„ìš”**: ìƒˆë¡œìš´ decoder êµ¬ì¡°

---

### 3ìˆœìœ„: í•™ìŠµ ì „ëµ ê°œì„ 

#### 3.1 **ë” ê¸´ í•™ìŠµ** â­â­
**í˜„ì¬**: 20 epochs  
**ì œì•ˆ**: 30-40 epochs

**ì˜ˆìƒ íš¨ê³¼**: ì „ì²´ ì„±ëŠ¥ +0.005~0.01

**íŒŒì¼**: `configs/train.yaml`

---

#### 3.2 **Learning Rate ì¡°ì •** â­
**í˜„ì¬**: lr=0.001  
**ì œì•ˆ**: 
- ì´ˆê¸° lr: 0.0015 (ë” ë¹ ë¥¸ í•™ìŠµ)
- ë˜ëŠ” OneCycleLR ì‚¬ìš©

**ì˜ˆìƒ íš¨ê³¼**: ë¯¸ë¯¸í•˜ì§€ë§Œ ì•ˆì •ì„± í–¥ìƒ

---

#### 3.3 **Multi-scale Training** â­â­
**ì œì•ˆ**: í•™ìŠµ ì¤‘ ë‹¤ì–‘í•œ ì´ë¯¸ì§€ í¬ê¸° ì‚¬ìš©
- [640, 800, 1024] ì¤‘ ëœë¤ ì„ íƒ

**ì˜ˆìƒ íš¨ê³¼**: ì¼ë°˜í™” ì„±ëŠ¥ í–¥ìƒ, Recall +0.005

**êµ¬í˜„ í•„ìš”**: Custom transform ì‘ì„±

---

### 4ìˆœìœ„: ê³ ê¸‰ ê¸°ë²•

#### 4.1 **Test Time Augmentation (TTA)** â­â­â­
**ì œì•ˆ**: ì˜ˆì¸¡ ì‹œ ì—¬ëŸ¬ ì¦ê°• ì ìš© í›„ ì•™ìƒë¸”
- ì›ë³¸ + HorizontalFlip + ë‹¤ì–‘í•œ í¬ê¸°

**ì˜ˆìƒ íš¨ê³¼**: H-Mean +0.005~0.01

**êµ¬í˜„ í•„ìš”**: predict.py ìˆ˜ì •

---

#### 4.2 **ì•™ìƒë¸”** â­â­â­
**ì œì•ˆ**: ì—¬ëŸ¬ ëª¨ë¸ ì¡°í•©
- v0 (ResNet-34) + v1 (EfficientNet) + v2 (ë‹¤ë¥¸ ì„¤ì •)

**ì˜ˆìƒ íš¨ê³¼**: H-Mean +0.01~0.02

**ì£¼ì˜**: ì œì¶œ ì‹œê°„ ì œí•œ í™•ì¸ í•„ìš”

---

## ğŸš€ ì¶”ì²œ ì‹¤í—˜ ìˆœì„œ

### Phase 1: ë¹ ë¥¸ ê°œì„  (1-2ì‹œê°„)
1. âœ… **ì´ë¯¸ì§€ í¬ê¸° 1024ë¡œ ì¦ê°€** (ê°€ì¥ íš¨ê³¼ì )
2. âœ… **box_thresh 0.25ë¡œ ë‚®ì¶¤** (Recall í–¥ìƒ)
3. âœ… **prob_map_loss_weight 7.0ìœ¼ë¡œ ì¦ê°€**

### Phase 2: ëª¨ë¸ ê°œì„  (2-3ì‹œê°„)
4. âœ… **EfficientNet-B3ë¡œ ë³€ê²½** (ResNet-50ë³´ë‹¤ ì‰¬ì›€)
5. âœ… **30 epochsë¡œ í•™ìŠµ**

### Phase 3: ìµœì í™” (ì„ íƒ)
6. âœ… **TTA ì ìš©**
7. âœ… **ì•™ìƒë¸”** (ì—¬ëŸ¬ ëª¨ë¸ ì¡°í•©)

---

## ğŸ“ êµ¬ì²´ì ì¸ v1 ì„¤ì • ì˜ˆì‹œ

### v1 ê¸°ë³¸ ì„¤ì •
```yaml
# ì´ë¯¸ì§€ í¬ê¸°
max_size: 1024

# Backbone
model_name: 'efficientnet_b3'

# Postprocess
box_thresh: 0.25

# Loss
prob_map_loss_weight: 7.0

# Training
max_epochs: 30
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ë©”ëª¨ë¦¬ ê´€ë¦¬
- ì´ë¯¸ì§€ í¬ê¸° ì¦ê°€ ì‹œ batch_size ì¡°ì • í•„ìš”
- 1024x1024: batch_size 8-12 ê¶Œì¥
- Gradient accumulation ì‚¬ìš© ê³ ë ¤

### í•™ìŠµ ì‹œê°„
- 1024 í¬ê¸° + 30 epochs: ì•½ 3-4ì‹œê°„ (RTX 3090 ê¸°ì¤€)
- ì‹œê°„ ì œì•½ ì‹œ ìš°ì„ ìˆœìœ„ ë†’ì€ ê²ƒë§Œ ì ìš©

### Overfitting ë°©ì§€
- Validation ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- Early stopping ê³ ë ¤
- ë” ê°•í•œ ë°ì´í„° ì¦ê°•

---

## ğŸ¯ ì˜ˆìƒ ì„±ëŠ¥ ëª©í‘œ

| Metric | í˜„ì¬ (v0) | ëª©í‘œ (v1) | ê°œì„  |
|--------|-----------|-----------|------|
| **H-Mean** | 0.9450 | **0.95+** | +0.005 |
| **Precision** | 0.9766 | 0.97+ | ìœ ì§€ |
| **Recall** | 0.9203 | **0.93+** | +0.01 |

---

## ğŸ’¡ ì¶”ê°€ íŒ

1. **Validation set ë¶„ì„**: ì–´ë–¤ ì´ë¯¸ì§€ì—ì„œ ì‹¤íŒ¨í•˜ëŠ”ì§€ í™•ì¸
2. **Hard negative mining**: ì–´ë ¤ìš´ ìƒ˜í”Œì— ì§‘ì¤‘
3. **Pseudo-labeling**: Test set í™œìš© (ê°€ëŠ¥í•œ ê²½ìš°)
4. **Cross-validation**: ë” ì•ˆì •ì ì¸ ì„±ëŠ¥ ì¸¡ì •
